<html>
<head>
<style type="text/css">

.transOptionDiv {
padding: 3px;
width: 75px;
border-top-color: f2f2f2;
outline: 55px ? undefined:undefined ? #000000;
-webkit-border-radius: 5px;
border-radius: 5px;
-moz-box-shadow: 3px 3px 4px #141414;
-webkit-box-shadow: 3px 3px 4px #141414;
box-shadow: 3px 3px 4px #141414;
}

.selectedOption {
    background-color: f2f2f2;
}
</style>	
</head>
<body>
<!-- 
<select id="selectedLan" onchange="changeLanguage();">
<option value="English">English</option>
<option value="Tamil" selected>Tamil</option>
<option value="Malayalam">Malayalam</option>
<option value="Hindi">Hindi</option>
</select> -->

<br>

<textarea rows="3" cols="50">

</textarea>

<br>

Field 1 : <input type="text" id="f1" quillpad="disable|tamil"/> <br>
Field 2 : <input type="text" id="f2" quillpad="enable|tamil"/> <br>
Field 3 : <input type="text" id="f3" quillpad="enable|tamil"/> <br>
<!-- Field 4 : <input type="text" id="f4" onkeyup="fetchResult('f4')" /> [on key up event] <br> -->

<p id="demo"></p>


<script>

var s = document.createElement('script'); 
s.setAttribute('src','./js/quill.js?lang=Tamil&key=3f3be4827749b9e30bd6b1986cc4fda4'); 
s.setAttribute('id','qpd_script'); 
document.head.appendChild(s);  



function fetchResult(inputId) {
	var inputElement = document.getElementById(inputId);
	var engLiteral = inputElement.value;
	
	var url = "http://xlit.quillpad.in/quillpad_backend2/processWordJSON?lang=tamil&inString="+engLiteral+"&scid=7";
	
	$.ajax({
		  crossOrigin: true,
		  url: url,
		  success: function(data) {
			console.log(data);
		  }
		});
	
	 var xhttp = new XMLHttpRequest();
	  xhttp.onreadystatechange=function() {
	    if (xhttp.readyState == 4 && xhttp.status == 200) {
	    	var response = xhttp.responseText;
	      document.getElementById("demo").innerHTML = response;
	            
	      showResult(response);
	    }
	  };
	  xhttp.open("GET", url, true);
	  xhttp.send();
 }

function showResult(response) {
	
	var jsonResponse=JSON.parse(response);
	
	var options = jsonResponse.twords[0].options;
	
	var iDiv = document.getElementById("transOptionMainDiv");

	if(iDiv != null) {
		iDiv.innerHTML = "";	
	} else {
		iDiv = document.createElement('div');
		iDiv.id = 'transOptionMainDiv';
		iDiv.className = 'transOptionDiv';
	}
	
	document.getElementsByTagName('body')[0].appendChild(iDiv);
	
	// user entered English word
	var innerDiv = document.createElement('div');
	innerDiv.className = 'block-2';

	iDiv.appendChild(innerDiv);
	innerDiv.innerHTML =jsonResponse.inString;
	innerDiv.innerHTML = "<span id='inString' onclick=\"selectOption('inString')\">"+jsonResponse.inString+"</span>";
	
	// user entered English word
	var innerDiv = document.createElement('div');
	innerDiv.className = 'selectedOption';

	iDiv.appendChild(innerDiv);
	innerDiv.innerHTML = "<span id='itrans' onclick=\"selectOption('itrans')\">"+jsonResponse.itrans+"</span>";
	
	
	
	for(var i in options)
	{
		// Now create and append to iDiv
		var innerDiv = document.createElement('div');
		innerDiv.id = i;
		innerDiv.className = 'block-2';

		// The variable iDiv is still good... Just append to it.
		iDiv.appendChild(innerDiv);
		var id = i + "" + i;
		innerDiv.innerHTML = "<span id="+id+" onclick=\"selectOption('"+id+"')\">"+options[i]+"</span>";
	     
	}		
}

function selectOption(optionId) {
	var selectedOption = document.getElementById(optionId).innerHTML;
	document.getElementById("f4").value = selectedOption;
}

//http://xlit.quillpad.in/quillpad_backend2/processWordJSON?lang=tamil&inString=aghil&callback=Qlib._quill_callback&scid=7

</script>


</body>
</html>